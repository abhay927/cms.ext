<!DOCTYPE html>
<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="css/login.css" />
<title>JMS CMS Report System Login</title>
<script type="text/javascript" src="js/jquery-3.3.1.js"></script>
</head>

<body>

 <div class="body"></div>
 <div class="grad"></div>
   <img class="logo" src="images/login_logo.png"></img>
 <div class="header">
  <div class="prompt">
   Members <span>Sign In</span>
  </div>
 </div>
 <br>
 <div class="login">
  <span class="message">User </span>
  <input type="text" placeholder="username" id="username">
  <input type="password" placeholder="password" id="password">
  <span> 
  <input type="text" placeholder=":-)" autocomplete="off" id="captcha">
  <img src="images/kaptcha.jpeg" id="kaptcha-img" onclick="">
  </span> 
  <input type="button" value="Login" id="submit" onclick="toLogin()">
  <p>
   <a href="#">Password forget?</a>
  </p>
 </div>

 <script>
    function reloadCaptcha() {
      $('#kaptcha-img').attr('src', "kaptcha?" + new Date());
    }
    $(document).ready(function() {
      $('.login input').keydown(function(e) {
        if (e.which === 13) {
          $(".message").css("visibility", "hidden"); 
          var index = $('input').index(this) + 1;
          $('input').eq(index).focus().select();
        }
      });
    });
    
    function toLogin(){
      console.log("toLogin()");
      var isAllFilled = true;
      $('.login input').each(function(e){
        if ($(this).attr("id") != "submit" && $(this).val() === ""){
          $(".message").html(ucFirst($(this).attr('id') + " item can not be left blank!"));
          $(".message").css("visibility", "visible"); 
          this.focus();
          isAllFilled = false;
          return false;
        }
      });
      console.log("submitted " + isAllFilled); 
      if( isAllFilled === true){
        //TODO: goto login;
      }
    }
    
    function ucFirst(string) {
        return string.charAt(0).toUpperCase() + string.slice(1);
    }
  </script>
</body>

</html>
